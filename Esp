-- ESP STANDALONE 2025 (Inicia Desativado)
_G.ESP_Enabled = false 

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

local function CreateESP(Player)
    local Box = Drawing.new("Square")
    local Name = Drawing.new("Text")
    local HealthBar = Drawing.new("Square")

    RunService.RenderStepped:Connect(function()
        if _G.ESP_Enabled and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
            local Root = Player.Character.HumanoidRootPart
            local Hum = Player.Character.Humanoid
            local Pos, OnScreen = Camera:WorldToViewportPoint(Root.Position)

            if OnScreen and Hum.Health > 0 then
                local SizeY = (Camera:WorldToViewportPoint(Root.Position - Vector3.new(0, 3, 0)).Y - Camera:WorldToViewportPoint(Root.Position + Vector3.new(0, 2.6, 0)).Y)
                local BoxSize = Vector2.new(SizeY * 1.5, SizeY)
                local BoxPos = Vector2.new(Pos.X - BoxSize.X / 2, Pos.Y - BoxSize.Y / 2)

                Box.Visible = true; Box.Size = BoxSize; Box.Position = BoxPos; Box.Color = Color3.fromRGB(255, 0, 0)
                Name.Visible = true; Name.Text = Player.Name; Name.Position = Vector2.new(Pos.X, BoxPos.Y - 20); Name.Center = true; Name.Outline = true
                
                HealthBar.Visible = true; HealthBar.Filled = true
                HealthBar.Size = Vector2.new(2, (Hum.Health / Hum.MaxHealth) * BoxSize.Y)
                HealthBar.Position = Vector2.new(BoxPos.X - 5, BoxPos.Y + (BoxSize.Y - HealthBar.Size.Y))
                HealthBar.Color = Color3.fromHSV(Hum.Health / Hum.MaxHealth * 0.3, 1, 1)

                local Highlight = Player.Character:FindFirstChild("EspCham") or Instance.new("Highlight", Player.Character)
                Highlight.Name = "EspCham"; Highlight.Enabled = true; Highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            else
                Box.Visible = false; Name.Visible = false; HealthBar.Visible = false
                if Player.Character:FindFirstChild("EspCham") then Player.Character.EspCham.Enabled = false end
            end
        else
            Box.Visible = false; Name.Visible = false; HealthBar.Visible = false
            if Player.Character and Player.Character:FindFirstChild("EspCham") then Player.Character.EspCham.Enabled = false end
        end
    end)
end

for _, v in pairs(Players:GetPlayers()) do if v ~= LocalPlayer then CreateESP(v) end end
Players.PlayerAdded:Connect(function(v) CreateESP(v) end)
